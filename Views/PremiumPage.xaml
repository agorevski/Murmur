<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:Murmur.App.ViewModels"
             x:Class="Murmur.App.Views.PremiumPage"
             x:DataType="vm:PremiumViewModel"
             Title="{Binding Title}">

    <ScrollView Padding="20">
        <VerticalStackLayout Spacing="20">
            <Label Text="âœ¨ Driftly Premium" 
                   FontSize="32" 
                   FontAttributes="Bold"
                   HorizontalOptions="Center"/>

            <Frame BorderColor="Gold"
                   Padding="20"
                   CornerRadius="15"
                   BackgroundColor="{AppThemeBinding Light=#FFF8DC, Dark=#4B4B3C}"
                   IsVisible="{Binding IsPremium}">
                <VerticalStackLayout Spacing="10">
                    <Label Text="ðŸŽ‰ You're Premium!" 
                           FontSize="24"
                           FontAttributes="Bold"
                           HorizontalOptions="Center"/>
                    <Label Text="Thank you for supporting Driftly!" 
                           FontSize="16"
                           HorizontalOptions="Center"
                           TextColor="Gray"/>
                </VerticalStackLayout>
            </Frame>

            <VerticalStackLayout Spacing="15" IsVisible="{Binding IsPremium, Converter={StaticResource InverseBoolConverter}}">
                <Label Text="Unlock Premium Features" 
                       FontSize="22" 
                       FontAttributes="Bold"
                       HorizontalOptions="Center"/>

                <Frame BorderColor="{AppThemeBinding Light=#E0E0E0, Dark=#404040}"
                       Padding="20"
                       CornerRadius="10">
                    <CollectionView ItemsSource="{Binding PremiumFeatures}">
                        <CollectionView.ItemTemplate>
                            <DataTemplate x:DataType="x:String">
                                <HorizontalStackLayout Spacing="10" Margin="0,5">
                                    <Label Text="âœ“" 
                                           FontSize="20" 
                                           TextColor="Green"
                                           VerticalOptions="Center"/>
                                    <Label Text="{Binding .}" 
                                           FontSize="16"
                                           VerticalOptions="Center"/>
                                </HorizontalStackLayout>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>
                </Frame>

                <Frame BorderColor="Purple"
                       Padding="20"
                       CornerRadius="10"
                       BackgroundColor="{AppThemeBinding Light=#E6E6FA, Dark=#4B0082}">
                    <VerticalStackLayout Spacing="10">
                        <Label Text="Monthly Subscription" 
                               FontSize="20"
                               FontAttributes="Bold"
                               HorizontalOptions="Center"/>
                        <Label Text="$4.99/month" 
                               FontSize="28"
                               FontAttributes="Bold"
                               HorizontalOptions="Center"
                               TextColor="Purple"/>
                        <Label Text="Cancel anytime" 
                               FontSize="14"
                               HorizontalOptions="Center"
                               TextColor="Gray"/>
                    </VerticalStackLayout>
                </Frame>

                <Button Text="Subscribe Now"
                        Command="{Binding PurchasePremiumCommand}"
                        BackgroundColor="Purple"
                        TextColor="White"
                        FontSize="18"
                        HeightRequest="60"
                        CornerRadius="10"/>

                <Button Text="Restore Purchases"
                        Command="{Binding RestorePurchasesCommand}"
                        BackgroundColor="Transparent"
                        TextColor="{AppThemeBinding Light=Black, Dark=White}"
                        BorderColor="Gray"
                        BorderWidth="1"/>
            </VerticalStackLayout>

            <VerticalStackLayout Spacing="5" Margin="0,20,0,0">
                <Label Text="Premium FAQ" 
                       FontSize="18" 
                       FontAttributes="Bold"/>
                
                <Label Text="Q: When will I be charged?" 
                       FontSize="14"
                       FontAttributes="Bold"
                       Margin="0,10,0,0"/>
                <Label Text="A: You'll be charged immediately upon subscription, then monthly on the same date." 
                       FontSize="14"
                       TextColor="Gray"/>

                <Label Text="Q: Can I cancel anytime?" 
                       FontSize="14"
                       FontAttributes="Bold"
                       Margin="0,10,0,0"/>
                <Label Text="A: Yes! Cancel anytime from your Google Play account. You'll keep premium until the end of your billing period." 
                       FontSize="14"
                       TextColor="Gray"/>

                <Label Text="Q: What happens to my mixes if I cancel?" 
                       FontSize="14"
                       FontAttributes="Bold"
                       Margin="0,10,0,0"/>
                <Label Text="A: All your saved mixes remain, but you'll be limited to 3 sounds per mix on the free plan." 
                       FontSize="14"
                       TextColor="Gray"/>
            </VerticalStackLayout>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
